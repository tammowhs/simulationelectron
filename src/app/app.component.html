<div fxLayout="row" fxLayoutAlign="start stretch">
  <div fxFlex="50" fxLayout="column" fxLayoutAlign="start stretch">
    <div fxLayout="row" fxLayoutAlign="start stretch">
      <div fxFlex="80" [formGroup]="paramForm">
        <h3>Parameter</h3>

        <ng-container *ngTemplateOutlet="labeledSlider; context:{name: 'Inkubationszeit', value: this.paramForm.value.daysIncubated, sliderOptions:{floor: 1, ceil: 10, step: 1}, formControlName: 'daysIncubated'}">
        </ng-container>

        <!-- <ng-container *ngTemplateOutlet="labeledSlider; context:{name: 'Test', value: this.paramForm.value.test, sliderOptions:{floor: 1, ceil: 10, step: 1}, formControlName: 'test'}">
        </ng-container> -->

        <ng-container *ngTemplateOutlet="labeledSlider; context:{name: 'Infektionszeit', value: this.paramForm.value.daysSymptomatic, sliderOptions:{floor: 1, ceil: 10, step: 1, showSelectionBar: true}, formControlName: 'daysSymptomatic'}">
        </ng-container>

        <ng-container *ngTemplateOutlet="labeledSlider; context:{name: 'Übertragungsrate', value: this.paramForm.value.transmissionProbability, sliderOptions:{floor: 0, ceil: 1, step: 0.05, showSelectionBar: true}, formControlName: 'transmissionProbability'}">
        </ng-container>

        <ng-container *ngTemplateOutlet="labeledSlider; context:{name: 'Sterberate', value: this.paramForm.value.deathRate, sliderOptions:{floor: 0, ceil: 1, step: 0.1, showSelectionBar: true}, formControlName: 'deathRate'}">
        </ng-container>

        <ng-container *ngTemplateOutlet="labeledSlider; context:{name: 'Tägliche Kontakte', value: this.paramForm.value.numberOfContacts, sliderOptions:{floor: 0, ceil: 10, step: 1, showSelectionBar: true}, formControlName: 'numberOfContacts'}">
        </ng-container>

        <ng-container *ngTemplateOutlet="labeledSlider; context:{name: 'Bewegungsradius', value: this.paramForm.value.movementRadius, sliderOptions:{floor: 0, ceil: 10, step: 1, showSelectionBar: true}, formControlName: 'movementRadius'}">
        </ng-container>

      </div>

      <div fxFlex="20" fxLayout="column" fxLayoutAlign="end stretch" [formGroup]="metaForm">
        <!-- <ng-container *ngTemplateOutlet="labeledSlider; context:{name: 'Test', value: this.paramForm.value.movementRadius, sliderOptions:{floor: 0, ceil: 10, step: 1, showSelectionBar: true, vertical: true}, formControlName: 'movementRadius'}">
        </ng-container> -->
        Geschwindigkeit {{this.metaForm.value.stepsPerSecond}}
        <ngx-slider [options]="{ floor: 1, ceil: 20, step: 1, showSelectionBar: true }" [formControlName]="'stepsPerSecond'"></ngx-slider>
        <button *ngIf="!simulationEnded" (click)="toggleSimulationExecution()">Play/Pause</button>
        <button *ngIf="simulationEnded" (click)="toggleSimulationExecution()">Reset</button>
        <button (click)="simulateStep()" [disabled]="simulationEnded || timerRunning">Step</button>
      </div>
    </div>

    <div fxFlex="60">
      <h3>Statistik</h3>
      Tag: {{day | json}}
      <!-- <div *ngFor="let statistic of statistics">
        {{statistic | json}}
      </div> -->
    </div>
  </div>

  <div fxFlex="40" class="canvas-wrapper">
    <canvas #canvas></canvas>
  </div>
</div>

<!-- <ng-template #labeledPlainHtmlSlider let-name="name" let-valueRef="value" let-min="min" let-max="max" let-step="step" let-fCName="formControlName">
  <div fxLayout="column" fxLayoutAlign="start stretch" [formGroup]="paramForm">
    <div fxLayout="row" fxLayoutAlign="space-between stretch">
      <label>
        {{name}}
      </label>
      {{valueRef}}
    </div>
    <input type="range" [min]="min" [max]="max" [step]="step" [formControlName]="fCName">
  </div>
</ng-template> -->

<ng-template #labeledSlider let-name="name" let-valueRef="value" let-options="sliderOptions" let-sliderControlName="formControlName">
  <div fxLayout="column" fxLayoutAlign="start stretch" [formGroup]="paramForm">
    <div fxLayout="row" fxLayoutAlign="space-between stretch">
      <label>
        <b>{{name}}</b>
      </label>
      {{valueRef}}
    </div>
    <ngx-slider [options]="options" [formControlName]="sliderControlName"></ngx-slider>
    <!-- <input type="range" [min]="min" [max]="max" [step]="step" [formControlName]="fCName"> -->
  </div>
</ng-template>

<router-outlet></router-outlet>
